<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Monthly View</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='month.css') }}">
</head>
<body>
    <div class="container">
        <h1>{{ month }}</h1>
        <table>
            <thead>
                <tr>
                    <th></th>
                    {% for day in range(first_day.day, last_day.day + 1) %}
                        <th>{{ day }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for habit in habits %}
                    <tr>
                        <td>{{ habit }}</td>
                        {% for day in range(1, last_day.day + 1) %}
                            {% set key = (habit, day) %}
                            {% set data_list = habit_data.get(key, []) %}
                            {% if data_list %}
                                {% set data = data_list[0] %}
                                {% if data[2] == 'mood' %}
                                    {% if data[5] == 1 %}
                                        <td>😞</td>
                                    {% elif data[5] == 2 %}
                                        <td>😕</td>
                                    {% elif data[5] == 3 %}
                                        <td>😌</td>
                                    {% elif data[5] == 4 %}
                                        <td>😊</td>
                                    {% elif data[5] == 5 %}
                                        <td>😄</td>
                                    {% else %}
                                        <td></td>
                                    {% endif %}
                                {% else %}
                                    {% if data[4] == True %}
                                        {% if data[2] == 'steps' %}
                                            {% if data[5] %}
                                                {% if data[5] >= 10000 %}
                                                    <td>✔️</td>
                                                {% elif data[5] < 10000 %}
                                                    <td>✗</td>
                                                {% endif %}
                                            {% else %}
                                                <td></td>
                                            {% endif %}
                                        {% else %}
                                            {% if data[5] %}
                                                <td>{{ data[5] }}</td>
                                            {% else %}
                                                <td></td>
                                            {% endif %}
                                        {% endif %}
                                    {% else %}
                                        {% if data[6] == True %}
                                            <td>✔️</td>
                                        {% elif data[6] == False %}
                                            <td>✗</td>
                                        {% else %}
                                            <td></td>
                                        {% endif %}
                                    {% endif %}
                                {% endif %}
                            {% else %}
                                <td></td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
            
        </table>
        <br />
        <a href="/day">Return</a>
    </div>
</body>
</html>
